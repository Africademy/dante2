(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{"./src/widgets.mdx":function(e,n,t){"use strict";t.r(n);var o=t("./node_modules/react/index.js"),a=t.n(o),r=t("./node_modules/@mdx-js/tag/dist/index.js"),i=t("./node_modules/docz/dist/index.m.js"),l=t("./src/site/data/poc.js"),s=t("./src/editor/components/Dante/Dante.js"),c=t("./node_modules/react-powerplug/dist/react-powerplug.esm.js"),d=t("./src/editor/components/blocks/image.js"),p=t("./src/editor/components/blocks/embed.js"),u=t("./src/editor/components/blocks/video.js"),m=t("./src/editor/components/blocks/placeholder.js"),f=t("./node_modules/draft-js/lib/Draft.js");function g(e){return(g="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function b(e,n){return(b=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e})(e,n)}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var k=function(e){function n(e){var t,o,a;return function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n),o=this,(t=!(a=(n.__proto__||Object.getPrototypeOf(n)).call(this,e))||"object"!==g(a)&&"function"!==typeof a?v(o):a).state={asked:!1,permission:!1,available:!1,recording:!1,paused:!1},t.stream=null,t.mediaRecorder=null,t.mediaChunk=[],t.start=t.start.bind(v(t)),t.stop=t.stop.bind(v(t)),t.pause=t.pause.bind(v(t)),t.resume=t.resume.bind(v(t)),t.initMediaRecorder=t.initMediaRecorder.bind(v(t)),t}var t,r,i;return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&b(e,n)}(n,o["Component"]),t=n,(r=[{key:"init",value:function(){"https:"!==window.location.protocol&&"localhost"!==window.location.hostname&&console.warn("getUserMedia() must be run from a secure origin: https or localhost.\nChanging protocol to https."),navigator.mediaDevices||navigator.getUserMedia||console.warn("Your browser doesn't support navigator.mediaDevices.getUserMedia and navigator.getUserMedia."),navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;var e=window.MediaStream||window.webkitMediaStream;"undefined"===typeof e||"stop"in e.prototype||(e.prototype.stop=function(){this.getAudioTracks().forEach(function(e){e.stop()}),this.getVideoTracks().forEach(function(e){e.stop()})})}},{key:"componentDidMount",value:function(){var e=this;this.init();this.props.width,this.props.height;var n=this.props.constraints,t=function(n,t){e.stream=n,e.mediaChunk=[],e.setState({permission:!0,asked:!0,recording:!1}),e.props.onGranted(),e.initMediaRecorder(),t()},o=function(n){e.setState({asked:!1}),e.props.onDenied(n)};this.askPermission=function(a){if(navigator.mediaDevices)navigator.mediaDevices.getUserMedia(n).then(function(e){return t(e,a)}).catch(o);else if(navigator.getUserMedia)navigator.getUserMedia(n,t,o);else{var r="Browser doesn't support UserMedia API. Please try with another browser.";console.warn(r),e.props.onError(new Error(r))}}}},{key:"componentWillUnmount",value:function(){this.mediaRecorder=null,this.mediaChunk=[],this.stream&&(this.stream.stop(),this.stream=null)}},{key:"initMediaRecorder",value:function(){var e=this;try{var n={},t=["video/webm;codecs=vp8","video/webm",""];this.props.mimeType&&t.unshift(this.props.mimeType);for(var o=0;o<t.length;o++){var a=t[o];if(MediaRecorder.isTypeSupported(a)){n.mimeType=a;break}console.warn("".concat(a," is not supported on your browser."))}var r=new MediaRecorder(this.stream,n);r.ondataavailable=function(n){n.data&&n.data.size>0&&e.mediaChunk.push(n.data)},this.mediaRecorder=r,this.setState({available:!0})}catch(e){console.log(e),console.error("Failed to initialize MediaRecorder.",e),this.setState({available:!1})}}},{key:"start",value:function(){var e=this;this.askPermission(function(){e.state.available&&(e.mediaChunk=[],e.mediaRecorder.start(e.props.timeSlice),e.setState({recording:!0}),e.props.onStart(e.stream))})}},{key:"pause",value:function(){this.state.recording&&"inactive"!==this.mediaRecorder.state&&(this.mediaRecorder.stop(),this.setState({paused:!0}),this.props.onPause())}},{key:"resume",value:function(){this.state.recording&&(this.initMediaRecorder(),this.mediaRecorder.start(this.props.timeSlice),this.setState({paused:!1}),this.props.onResume(this.stream))}},{key:"stop",value:function(){if(this.state.available&&"inactive"!==this.mediaRecorder.state){this.mediaRecorder.stop(),this.setState({recording:!1});var e=new Blob(this.mediaChunk,{type:"video/webm"});this.props.onStop(e)}}},{key:"render",value:function(){this.state.asked,this.state.permission,this.state.recording,this.state.available;return a.a.createElement("div",{className:this.props.className},this.props.render({start:this.start,stop:this.stop,pause:this.pause,resume:this.resume}))}}])&&h(t.prototype,r),i&&h(t,i),n}();k.defaultProps={constraints:{audio:!0,video:!0},className:"",timeSlice:0,mimeType:"",render:function(){},onGranted:function(){},onDenied:function(){},onStart:function(){},onStop:function(){},onPause:function(){},onResume:function(){},onError:function(){}};var y=k;k.__docgenInfo={description:"",methods:[{name:"init",docblock:null,modifiers:[],params:[],returns:null},{name:"initMediaRecorder",docblock:null,modifiers:[],params:[],returns:null},{name:"start",docblock:null,modifiers:[],params:[],returns:null},{name:"pause",docblock:null,modifiers:[],params:[],returns:null},{name:"resume",docblock:null,modifiers:[],params:[],returns:null},{name:"stop",docblock:null,modifiers:[],params:[],returns:null}],displayName:"ReactMediaRecorder",props:{constraints:{defaultValue:{value:"{\n  audio: true,\n  video: true\n}",computed:!1},type:{name:"object"},required:!1,description:""},className:{defaultValue:{value:"''",computed:!1},type:{name:"string"},required:!1,description:""},timeSlice:{defaultValue:{value:"0",computed:!1},type:{name:"number"},required:!1,description:""},mimeType:{defaultValue:{value:"''",computed:!1},type:{name:"string"},required:!1,description:""},render:{defaultValue:{value:"function() {}",computed:!1},type:{name:"func"},required:!1,description:""},onGranted:{defaultValue:{value:"function(){}",computed:!1},type:{name:"func"},required:!1,description:""},onDenied:{defaultValue:{value:"function(){}",computed:!1},type:{name:"func"},required:!1,description:""},onStart:{defaultValue:{value:"function(){}",computed:!1},type:{name:"func"},required:!1,description:""},onStop:{defaultValue:{value:"function(){}",computed:!1},type:{name:"func"},required:!1,description:""},onPause:{defaultValue:{value:"function(){}",computed:!1},type:{name:"func"},required:!1,description:""},onResume:{defaultValue:{value:"function(){}",computed:!1},type:{name:"func"},required:!1,description:""},onError:{defaultValue:{value:"function(){}",computed:!1},type:{name:"func"},required:!1,description:""}}};var w=t("./node_modules/react-emotion/dist/index.esm.js"),E=function(){return a.a.createElement("svg",{width:"20px",height:"20px",viewBox:"0 0 512.001 512.001"},a.a.createElement("path",{fill:"#00000070",d:"M481.086,188.037c-3.454-2.062-7.737-2.159-11.278-0.253l-73.901,39.777v-34.087c0-6.312-5.118-11.429-11.428-11.429 h-18.586c23.179-18.799,38.024-47.493,38.024-79.594C403.918,45.96,357.958,0,301.465,0c-48.218,0-88.757,33.487-99.598,78.424 c-14.182-17.112-35.587-28.032-59.497-28.032c-42.6,0-77.256,34.657-77.256,77.256c0,21.199,8.586,40.426,22.459,54.4H77.138 c-6.312,0-11.429,5.117-11.429,11.429v51.879H36.776c-6.312,0-11.429,5.117-11.429,11.429v44.944 c0,6.312,5.117,11.429,11.429,11.429h28.932v51.879c0,6.312,5.117,11.429,11.429,11.429h134.825l-61.946,118.825 c-2.918,5.596-0.746,12.499,4.851,15.417c1.688,0.88,3.494,1.297,5.273,1.297c4.123,0,8.105-2.239,10.143-6.147l60.523-116.098 l60.524,116.098c2.038,3.91,6.021,6.147,10.144,6.147c1.779,0,3.586-0.417,5.273-1.297c5.597-2.918,7.769-9.821,4.85-15.417 l-61.946-118.825h134.827c6.311,0,11.429-5.117,11.429-11.429v-34.088l73.901,39.777c1.694,0.911,3.555,1.365,5.416,1.365 c2.03,0,4.059-0.541,5.862-1.617c3.454-2.063,5.567-5.789,5.567-9.811V197.848C486.653,193.825,484.54,190.1,481.086,188.037z M65.709,290.297H48.205V268.21h17.504V290.297z M301.465,22.857c43.888,0,79.595,35.706,79.595,79.595 c0,43.889-35.706,79.594-79.595,79.594c-43.888,0-79.594-35.706-79.594-79.594C221.872,58.564,257.578,22.857,301.465,22.857z M214.192,156.054c6.104,9.904,13.847,18.693,22.847,25.992h-39.872C204.476,174.684,210.3,165.855,214.192,156.054z M142.37,73.248c29.995,0,54.399,24.403,54.399,54.399c0,29.996-24.403,54.4-54.399,54.4c-29.995,0-54.399-24.403-54.399-54.4 C87.972,97.651,112.375,73.248,142.37,73.248z M373.05,246.691v65.123v41.79H231.013c-0.021,0-0.041,0-0.062,0h-0.302 c-0.013,0-0.026,0-0.039,0H88.566v-51.879v-44.944v-51.879H373.05V246.691z M463.796,341.529l-67.889-36.542v-51.468 l67.889-36.542V341.529z"}),a.a.createElement("path",{fill:"#00000070",d:"M142.37,92.931c-19.143,0-34.716,15.574-34.716,34.716c0,19.143,15.574,34.716,34.716,34.716 c19.143,0,34.716-15.574,34.716-34.716C177.087,108.505,161.513,92.931,142.37,92.931z M142.37,141.791 c-7.8,0-14.145-6.345-14.145-14.145c0-7.8,6.345-14.145,14.145-14.145c7.8,0,14.145,6.345,14.145,14.145 C156.515,135.446,150.169,141.791,142.37,141.791z"}),a.a.createElement("path",{fill:"#00000070",d:"M301.465,52.595c-27.491,0-49.856,22.366-49.856,49.857c0,27.49,22.365,49.856,49.856,49.856 c27.491,0,49.856-22.366,49.856-49.856C351.321,74.961,328.957,52.595,301.465,52.595z M301.465,129.451 c-14.887,0-26.999-12.112-26.999-26.999c0-14.887,12.112-27,26.999-27s26.999,12.112,26.999,27S316.352,129.451,301.465,129.451z"}),a.a.createElement("path",{fill:"#00000070",d:"M264.593,238.137h-124.26c-5.997,0-10.857,4.861-10.857,10.857v60.519c0,5.997,4.861,10.857,10.857,10.857h124.26 c5.997,0,10.857-4.861,10.857-10.857v-60.519C275.45,242.999,270.589,238.137,264.593,238.137z M253.735,298.656H151.19v-38.804 h102.546V298.656z"}),a.a.createElement("circle",{fill:"#00000070",cx:"324.536",cy:"260.422",r:"11.429"}),a.a.createElement("circle",{fill:"#00000070",cx:"324.536",cy:"298.079",r:"11.429"}))},x=E;E.__docgenInfo={description:"",methods:[],displayName:"icon"};var _=t("./src/editor/model/index.js"),T=t("./node_modules/axios/index.js"),M=t.n(T),D=q(["\n  background: #ffffff;\n  padding: 0px;\n  margin-bottom: 10px;\n  border: 1px solid rgba(0,0,0,0.09);\n  box-shadow: 0 1px 4px rgba(0,0,0,0.07);\n  border-radius: 3px;\n  position:relative;\n"]),S=q(["\n  padding: 20px;\n"]),C=q(["\n  background: ",";\n  position: absolute;\n  height: 13px;\n  width: 13px;\n  border-radius: 50%;\n  display: inline-block;\n  position: absolute;\n  top: 58px;\n  right: 25px;\n  box-shadow: inset -1px -2px 14px 0px #841744;\n\n"]),j=q(["\n    width: 100%;\n    display: -webkit-box;\n    display: -webkit-flex;\n    display: -ms-flexbox;\n    display: flex;\n    padding-left: 27px;\n    /* height: 100%; */\n    /* -webkit-align-items: center; */\n    /* -webkit-box-align: center; */\n    -ms-flex-align: center;\n    /* align-items: center; */\n    /* -webkit-box-pack: center; */\n    -webkit-justify-content: ;\n    -ms-flex-pack: center;\n    /* justify-content: center; */\n    /* place-content: space-between; */\n    margin-top: 31px;\n    margin-left: 7px;\n    height: 50px;\n\n"]),O=q(["\n  z-index: 10;\n  position:absolute;\n  height: 100%;\n  width: 100%;\n  background: ",";\n\n  opacity: ",";\n\n"]),P=q(["\n  width: 100%;\n  background: black;\n"]),N=q(["\n    //position: absolute;\n    font-size: 1rem;\n    right: 39px;\n    top: 19px;\n    font-size: 2em;\n    color: white;\n\n"]),R=q(["\n\n  display: inline-block;\n  cursor: pointer;\n  -webkit-transition: all 0.25s ease;\n  transition: all 0.25s ease;\n  margin: 1px 7px;\n  text-indent: 36px;\n\n  text-indent: 36px;\n  color: #d9ece5;\n  text-shadow: 0px 1px 0px #101010;\n\n  &:hover{\n    //color: ","\n    color: #d9ece5;\n  }\n\n\n  &:before{\n    position: absolute;\n    width: 31px;\n    height: 30px;\n    top: 2px;\n    content: '';\n    border-radius: 50px;\n    background: #e80415;\n    cursor: pointer;\n    left: 2px;\n  }\n\n  &.recording{\n    &:before{\n\n    position: absolute;\n    width: 20px;\n    height: 20px;\n    top: 6px;\n    content: '';\n    border-radius: 2px;\n    background: #e80415;\n    cursor: pointer;\n    left: 7px;\n    }\n  }\n\n\n  &:after{\n    position: absolute;\n    width: 38px;\n    height: 38px;\n    top: 4px;\n    content: '';\n    -webkit-transform: translate(-6px,-6px);\n    -ms-transform: translate(-6px,-6px);\n    -webkit-transform: translate(-6px,-6px);\n    -ms-transform: translate(-6px,-6px);\n    -webkit-transform: translate(-6px,-6px);\n    -ms-transform: translate(-6px,-6px);\n    transform: translate(-6px,-6px);\n    border-radius: 50%;\n    border: 2px solid #fff;\n    cursor: pointer;\n    left: 4px;\n  }\n\n"]),V=q(["\n\n    outline: none;\n    height: 37px;\n    /* margin-right: 10px; */\n    /* text-align: center; */\n    border-radius: 40px;\n    background: ",";\n    border: 2px solid ",";\n    color: #ffffff;\n    -webkit-letter-spacing: 1px;\n    -moz-letter-spacing: 1px;\n    -ms-letter-spacing: 1px;\n    letter-spacing: 1px;\n    text-shadow: 0;\n    cursor: pointer;\n    -webkit-transition: all 0.25s ease;\n    transition: all 0.25s ease;\n\n\n    font-size:12px;\n    font-weight:bold;\n \n  cursor: pointer;\n  transition: all 0.25s ease;\n  &:hover {\n    color:white;\n    background: ",';\n  }\n  &:active {\n    //letter-spacing: 2px;\n    letter-spacing: 2px ;\n  }\n  //&:after {\n  //  content:"SUBMIT";\n  //}\n\n  &.onclic {\n    width: 24px !important;\n    border-color:',";\n    border-width:3px;\n    font-size:0;\n    border-left-color:",';\n    animation: rotating 2s 0.25s linear infinite;\n\n    &:after {\n      content:"";\n    }\n    &:hover {\n      color:$green;\n      background: white;\n    }\n  }\n\n  &.right{\n    float: right;\n    margin-right: 26px;\n  }\n\n  @keyframes rotating {\n    from {\n      transform: rotate(0deg);\n    }\n    to {\n      transform: rotate(360deg);\n    }\n  }\n\n\n']);function X(e){return(X="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function B(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function U(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function z(e,n){return!n||"object"!==X(n)&&"function"!==typeof n?L(e):n}function I(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&F(e,n)}function F(e,n){return(F=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e})(e,n)}function L(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function q(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}var G=Object(w.a)("div")(D),H=Object(w.a)("div")(S),W="#00ab6b",A=(Object(w.a)("div")(C,function(e){return e.active?"#e61742":W}),Object(w.a)("div")(j)),J=Object(w.a)("div")(O,function(e){return e.loading?"white":"transparent"},function(e){return e.loading?"0.9":"1"}),Y=Object(w.a)("video")(P),$=Object(w.a)("div")(N),K=Object(w.a)("div")(R,W),Q=Object(w.a)("button")(V,W,W,W,"#bbbbbb",W),Z=function(e){function n(e){var t;B(this,n),t=z(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e)),Object.defineProperty(L(t),"updateData",{configurable:!0,enumerable:!0,writable:!0,value:function(e){var n=t.props,o=n.blockProps,a=n.block,r=o.getEditorState,i=o.setEditorState,l=a.getData().merge(t.state).merge(e);return i(Object(_.e)(r(),a,l))}}),Object.defineProperty(L(t),"confirm",{configurable:!0,enumerable:!0,writable:!0,value:function(){t.downloadVideo(t.file)}}),Object.defineProperty(L(t),"recordMode",{configurable:!0,enumerable:!0,writable:!0,value:function(){t.video.loop=!1,t.video.controls=!1,t.video.muted=!0}}),Object.defineProperty(L(t),"playMode",{configurable:!0,enumerable:!0,writable:!0,value:function(){t.video.loop=!1,t.video.controls=!0,t.video.muted=!0}}),Object.defineProperty(L(t),"setUrlToVideo",{configurable:!0,enumerable:!0,writable:!0,value:function(e){t.playMode(),t.video.src=e}}),Object.defineProperty(L(t),"formatData",{configurable:!0,enumerable:!0,writable:!0,value:function(){var e=new FormData;if(t.file){var n=t.config.upload_formName||"file";return e.append(n,t.file),e}return e.append("url",t.state.url),e}}),Object.defineProperty(L(t),"getUploadUrl",{configurable:!0,enumerable:!0,writable:!0,value:function(){var e=t.config.upload_url;return"function"===typeof e?e():e}}),Object.defineProperty(L(t),"stopLoader",{configurable:!0,enumerable:!0,writable:!0,value:function(){return t.setState({loading:!1,fileReady:!1})}}),Object.defineProperty(L(t),"uploadFile",{configurable:!0,enumerable:!0,writable:!0,value:function(e){return t.file=e,t.config.upload_handler?t.config.upload_handler(t.state.url,L(t)):t.config.upload_url?(t.setState({loading:!0}),M()({method:"post",url:t.getUploadUrl(),headers:t.getUploadHeaders(),data:t.formatData(),onUploadProgress:function(e){return t.updateProgressBar(e)}}).then(function(e){if(t.uploadCompleted(e.data.url),t.config.upload_callback)return t.config.upload_callback(e,L(t))}).catch(function(e){if(t.uploadFailed(),console.log("ERROR: got error uploading file ".concat(e)),t.config.upload_error_callback)return t.config.upload_error_callback(e,L(t))}),function(e){return t.uploadCompleted(e.url)}):void t.stopLoader()}}),Object.defineProperty(L(t),"uploadFailed",{configurable:!0,enumerable:!0,writable:!0,value:function(){t.props.blockProps.removeLock(),t.stopLoader()}}),Object.defineProperty(L(t),"isReadOnly",{configurable:!0,enumerable:!0,writable:!0,value:function(){return t.props.blockProps.getEditor().props.read_only}}),Object.defineProperty(L(t),"placeHolderEnabled",{configurable:!0,enumerable:!0,writable:!0,value:function(){return t.state.enabled||t.props.block.getText()}}),Object.defineProperty(L(t),"placeholderText",{configurable:!0,enumerable:!0,writable:!0,value:function(){return t.config.image_caption_placeholder||"caption here (optional)"}}),Object.defineProperty(L(t),"defaultPlaceholder",{configurable:!0,enumerable:!0,writable:!0,value:function(){return t.props.blockProps.config.image_caption_placeholder}}),t.file=t.props.blockProps.data.get("file"),t.config=t.props.blockProps.config;var o=t.props.block.getData().toJS();return t.state={caption:t.defaultPlaceholder(),direction:o.direction||"center",granted:!1,rejectedReason:"",recording:!1,paused:!1,fileReady:!1,secondsLeft:0,loading:!1,url:t.props.block.data.get("url")},t.video=null,t.stopTimeout=null,t.secondInterval=null,t.handleGranted=t.handleGranted.bind(L(t)),t.handleDenied=t.handleDenied.bind(L(t)),t.handleStart=t.handleStart.bind(L(t)),t.handleStop=t.handleStop.bind(L(t)),t.handlePause=t.handlePause.bind(L(t)),t.handleResume=t.handleResume.bind(L(t)),t.setStreamToVideo=t.setStreamToVideo.bind(L(t)),t.releaseStreamFromVideo=t.releaseStreamFromVideo.bind(L(t)),t.downloadVideo=t.downloadVideo.bind(L(t)),t}var t,o,r;return I(n,a.a.Component),t=n,(o=[{key:"componentDidMount",value:function(){this.video=this.refs.app.querySelector("video"),this.state.url&&(this.setUrlToVideo(this.state.url),this.playMode())}},{key:"handleGranted",value:function(){this.setState({granted:!0}),console.log("Permission Granted!")}},{key:"handleDenied",value:function(e){this.setState({rejectedReason:e.name}),console.log("Permission Denied!",e)}},{key:"handleStart",value:function(e,n){var t=this;if(this.setState({recording:!0,fileReady:!1}),this.setStreamToVideo(e),console.log("Recording Started."),n.config.seconds_to_record){var o=n.config.seconds_to_record/1e3;this.setState({secondsLeft:o}),this.secondInterval&&clearTimeout(this.secondInterval),this.secondInterval=setInterval(function(){t.setState({secondsLeft:t.state.secondsLeft-1})},1e3),this.stopTimeout=setTimeout(function(){n.refs.mediaRecorder.stop()},n.config.seconds_to_record)}}},{key:"handleStop",value:function(e){this.stopTimeout&&(clearTimeout(this.secondInterval),this.setState({secondsLeft:0}),clearTimeout(this.stopTimeout)),this.setState({recording:!1,fileReady:!0}),this.releaseStreamFromVideo(),console.log("Recording Stopped."),this.file=e,this.setStreamToVideo(this.file),this.playMode()}},{key:"handlePause",value:function(){this.releaseStreamFromVideo(),this.setState({paused:!0})}},{key:"handleResume",value:function(e){this.setStreamToVideo(e),this.setState({paused:!1})}},{key:"handleError",value:function(e){console.log(e)}},{key:"setStreamToVideo",value:function(e){var n=this.refs.app.querySelector("video");this.recordMode(n);try{n.srcObject=e}catch(t){n.src=URL.createObjectURL(e)}}},{key:"releaseStreamFromVideo",value:function(){this.video.src="",this.video.srcObject=null}},{key:"downloadVideo",value:function(e){this.setStreamToVideo(e),this.playMode(),this.uploadFile(e)}},{key:"getUploadHeaders",value:function(){return this.config.upload_headers||{}}},{key:"uploadCompleted",value:function(e){this.setState({url:e},this.updateData),this.props.blockProps.removeLock(),this.stopLoader(),this.file=null,this.setUrlToVideo(e)}},{key:"updateProgressBar",value:function(e){var n=this.state.loading_progress;if(e.lengthComputable)return n=null!=(n=e.loaded/e.total*100)?n:{complete:0},this.setState({loading_progress:n}),console.log("complete: ".concat(n))}},{key:"render",value:function(){var e=this;this.state.granted,this.state.rejectedReason,this.state.recording,this.state.paused;return a.a.createElement("div",{ref:"app"},a.a.createElement(G,null,a.a.createElement(y,{ref:"mediaRecorder",constraints:{audio:{sampleSize:16,channelCount:2,echoCancellation:!0,noiseSuppression:!1},video:!0},timeSlice:10,onGranted:this.handleGranted,onDenied:this.handleDenied,onStart:function(n){return e.handleStart(n,e)},onStop:this.handleStop,onPause:this.handlePause,onResume:this.handleResume,onError:this.handleError,render:function(n){var t=n.start,o=n.stop;n.pause,n.resume;return a.a.createElement("div",null,e.isReadOnly()?null:a.a.createElement(J,{loading:e.state.loading},a.a.createElement(A,null,a.a.createElement("div",{style:{position:"relative",display:"flex"}},e.state.loading?null:a.a.createElement(a.a.Fragment,null,a.a.createElement(K,{contentEditable:!1,onClick:function(n){n.preventDefault(),e.state.recording?o():t()},disabled:e.state.recording,className:e.state.recording?"recording":""},e.state.recording?"recording. (".concat(e.state.secondsLeft," seconds left)"):"press button to start recording"),a.a.createElement($,null))),e.state.fileReady&&!e.state.loading?a.a.createElement(Q,{onClick:function(n){n.preventDefault(),e.confirm()}},"confirm recording upload ?"):null,e.state.loading?a.a.createElement(ee,{toggle:e.state.loading,progress:e.state.loading_progress}):null)),a.a.createElement(H,null,a.a.createElement(Y,{autoPlay:!0,muted:!0}),a.a.createElement("figcaption",{className:"imageCaption",onMouseDown:e.handleFocus},0===e.props.block.getText().length?a.a.createElement("span",{className:"danteDefaultPlaceholder"},e.placeholderText()):void 0,a.a.createElement(f.EditorBlock,Object.assign({},e.props,{editable:!0,className:"imageCaption"})))))}})))}}])&&U(t.prototype,o),r&&U(t,r),n}(),ee=function(e){function n(){var e,t,o;B(this,n);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return z(o,(t=o=z(this,(e=n.__proto__||Object.getPrototypeOf(n)).call.apply(e,[this].concat(i))),Object.defineProperty(L(o),"render",{configurable:!0,enumerable:!0,writable:!0,value:function(){return a.a.createElement("div",null,o.props.toggle?a.a.createElement("div",{className:"image-upoader-loader"},a.a.createElement("p",null,100===o.props.progress?"processing video...":a.a.createElement("span",null,a.a.createElement("span",null,"uploading video "," "),Math.round(o.props.progress),"%"))):void 0)}}),t))}return I(n,a.a.Component),n}(),ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n={title:"record a video",type:"recorded-video",icon:x,block:Z,editable:!0,renderable:!0,breakOnContinuous:!0,wrapper_class:"graf graf--video",selected_class:"is-selected",selectedFn:function(e){},widget_options:{displayOnInlineTooltip:!0,insertion:"insertion",insert_block:"image"},options:{seconds_to_record:1e4}};return Object.assign(n,e)};Z.__docgenInfo={description:"",methods:[{name:"updateData",docblock:null,modifiers:[],params:[{name:"options",type:null}],returns:null},{name:"handleGranted",docblock:null,modifiers:[],params:[],returns:null},{name:"handleDenied",docblock:null,modifiers:[],params:[{name:"err",type:null}],returns:null},{name:"handleStart",docblock:null,modifiers:[],params:[{name:"stream",type:null},{name:"context",type:null}],returns:null},{name:"handleStop",docblock:null,modifiers:[],params:[{name:"blob",type:null}],returns:null},{name:"confirm",docblock:null,modifiers:[],params:[],returns:null},{name:"handlePause",docblock:null,modifiers:[],params:[],returns:null},{name:"handleResume",docblock:null,modifiers:[],params:[{name:"stream",type:null}],returns:null},{name:"handleError",docblock:null,modifiers:[],params:[{name:"err",type:null}],returns:null},{name:"recordMode",docblock:null,modifiers:[],params:[],returns:null},{name:"playMode",docblock:null,modifiers:[],params:[],returns:null},{name:"setStreamToVideo",docblock:null,modifiers:[],params:[{name:"stream",type:null}],returns:null},{name:"setUrlToVideo",docblock:null,modifiers:[],params:[{name:"url",type:null}],returns:null},{name:"releaseStreamFromVideo",docblock:null,modifiers:[],params:[],returns:null},{name:"downloadVideo",docblock:null,modifiers:[],params:[{name:"blob",type:null}],returns:null},{name:"formatData",docblock:null,modifiers:[],params:[],returns:null},{name:"getUploadUrl",docblock:null,modifiers:[],params:[],returns:null},{name:"getUploadHeaders",docblock:null,modifiers:[],params:[],returns:null},{name:"stopLoader",docblock:null,modifiers:[],params:[],returns:null},{name:"uploadFile",docblock:null,modifiers:[],params:[{name:"blob",type:null}],returns:null},{name:"uploadFailed",docblock:null,modifiers:[],params:[],returns:null},{name:"uploadCompleted",docblock:null,modifiers:[],params:[{name:"url",type:null}],returns:null},{name:"updateProgressBar",docblock:null,modifiers:[],params:[{name:"e",type:null}],returns:null},{name:"isReadOnly",docblock:null,modifiers:[],params:[],returns:null},{name:"placeHolderEnabled",docblock:null,modifiers:[],params:[],returns:null},{name:"placeholderText",docblock:null,modifiers:[],params:[],returns:null},{name:"defaultPlaceholder",docblock:null,modifiers:[],params:[],returns:null}],displayName:"VideoRecorderBlock"};var te={publicUrl:"/dante2/",uploadUrl:"https://dante-uploader.herokuapp.com/upload"};function oe(e,n){if(null==e)return{};var t,o,a=function(e,n){if(null==e)return{};var t,o,a={},r=Object.keys(e);for(o=0;o<r.length;o++)t=r[o],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)t=r[o],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}n.default=function(e){var n=e.components,t=oe(e,["components"]);return a.a.createElement(r.MDXTag,{name:"wrapper",components:n},a.a.createElement(r.MDXTag,{name:"h1",components:n,props:{id:"widgets"}},a.a.createElement(r.MDXTag,{name:"a",components:n,parentName:"h1",props:{"aria-hidden":!0,href:"#widgets"}},a.a.createElement(r.MDXTag,{name:"span",components:n,parentName:"a",props:{className:"icon-link"}},"#")),"Widgets"),a.a.createElement(r.MDXTag,{name:"p",components:n},"Widgets are just react components that you can use to render custom content on your component. Note that all Dante's features are composed as components."),a.a.createElement(r.MDXTag,{name:"p",components:n},"Widgets are contained in an array that contain a configuration object"),a.a.createElement(r.MDXTag,{name:"p",components:n},"the config options are:"),a.a.createElement(r.MDXTag,{name:"h2",components:n,props:{id:"options"}},a.a.createElement(r.MDXTag,{name:"a",components:n,parentName:"h2",props:{"aria-hidden":!0,href:"#options"}},a.a.createElement(r.MDXTag,{name:"span",components:n,parentName:"a",props:{className:"icon-link"}},"#")),"Options"),a.a.createElement(r.MDXTag,{name:"ul",components:n},a.a.createElement(r.MDXTag,{name:"li",components:n,parentName:"ul"},a.a.createElement(r.MDXTag,{name:"strong",components:n,parentName:"li"},"block"),": the class of the React.Component."),a.a.createElement(r.MDXTag,{name:"li",components:n,parentName:"ul"},a.a.createElement(r.MDXTag,{name:"strong",components:n,parentName:"li"},"editable"),": boolean, this configures if the component will be editable or not."),a.a.createElement(r.MDXTag,{name:"li",components:n,parentName:"ul"},a.a.createElement(r.MDXTag,{name:"strong",components:n,parentName:"li"},"renderable"),": boolean, this configures if the component is renderable"),a.a.createElement(r.MDXTag,{name:"li",components:n,parentName:"ul"},a.a.createElement(r.MDXTag,{name:"strong",components:n,parentName:"li"},"breakOnContinuous"),": boolean, same as continuousBlock but for widgets."),a.a.createElement(r.MDXTag,{name:"li",components:n,parentName:"ul"},a.a.createElement(r.MDXTag,{name:"strong",components:n,parentName:"li"},"handleEnterWithText"),": function, this handles the behaviour when you hit ENTER on the component and text is present.\nhandleEnterWihoutText: function, this handles the behaviour when you hit ENTER on the component and no text is present."),a.a.createElement(r.MDXTag,{name:"li",components:n,parentName:"ul"},a.a.createElement(r.MDXTag,{name:"strong",components:n,parentName:"li"},"selectedFn"),": function, this handles the behaviour when component is focused"),a.a.createElement(r.MDXTag,{name:"li",components:n,parentName:"ul"},a.a.createElement(r.MDXTag,{name:"strong",components:n,parentName:"li"},"selected_class"),": string, this configures which class will be added when component is focused"),a.a.createElement(r.MDXTag,{name:"li",components:n,parentName:"ul"},a.a.createElement(r.MDXTag,{name:"strong",components:n,parentName:"li"},"wrapper_class"),": string, this configures the default class that will wrapp the component"),a.a.createElement(r.MDXTag,{name:"li",components:n,parentName:"ul"},a.a.createElement(r.MDXTag,{name:"strong",components:n,parentName:"li"},"options"),": Object, this are custom options that will be stored in your component for later use."),a.a.createElement(r.MDXTag,{name:"li",components:n,parentName:"ul"},a.a.createElement(r.MDXTag,{name:"strong",components:n,parentName:"li"},"widget_options"),": Object, this are custom options that will operate as a blockProps, this are volatile options and will not be stored in your content but will be accesible in the editor's context. ")),a.a.createElement(r.MDXTag,{name:"hr",components:n}),a.a.createElement(r.MDXTag,{name:"p",components:n},'Widgets can interoperate with tooltips or other widgets. For example the Add Button loads the widgets that have a "displayOnInlineTooltip" option on widget_options. That basically is a custom option that can be read from any component since the widget context have access to Dante\'s context.'),a.a.createElement(r.MDXTag,{name:"hr",components:n}),a.a.createElement(r.MDXTag,{name:"h2",components:n,props:{id:"default"}},a.a.createElement(r.MDXTag,{name:"a",components:n,parentName:"h2",props:{"aria-hidden":!0,href:"#default"}},a.a.createElement(r.MDXTag,{name:"span",components:n,parentName:"a",props:{className:"icon-link"}},"#")),"default"),a.a.createElement(r.MDXTag,{name:"p",components:n},'By default Dante2 has the image, link embed & video embed activated out of the box. If "Add Button" is configured (it is by default), those widgets will be displayed when the button is clicked.  '),a.a.createElement(i.d,{__position:0,__code:"<Dante content={null} />",__scope:{props:t,h1:l.e,Dante:s.a,State:c.a,Toggle:c.b,ImageBlockConfig:d.a,EmbedBlockConfig:p.a,VideoBlockConfig:u.a,PlaceholderBlockConfig:m.a,VideoRecorderBlockConfig:ne,config:te}},a.a.createElement(s.a,{content:null})),a.a.createElement(r.MDXTag,{name:"h2",components:n,props:{id:"empty-widgets"}},a.a.createElement(r.MDXTag,{name:"a",components:n,parentName:"h2",props:{"aria-hidden":!0,href:"#empty-widgets"}},a.a.createElement(r.MDXTag,{name:"span",components:n,parentName:"a",props:{className:"icon-link"}},"#")),"empty widgets"),a.a.createElement(r.MDXTag,{name:"p",components:n},"Also you can empty the list of widgets:"),a.a.createElement(i.d,{__position:1,__code:"<Dante content={null} widgets={[]} />",__scope:{props:t,h1:l.e,Dante:s.a,State:c.a,Toggle:c.b,ImageBlockConfig:d.a,EmbedBlockConfig:p.a,VideoBlockConfig:u.a,PlaceholderBlockConfig:m.a,VideoRecorderBlockConfig:ne,config:te}},a.a.createElement(s.a,{content:null,widgets:[]})),a.a.createElement(r.MDXTag,{name:"p",components:n},"Or configure those one by one:"),a.a.createElement(i.d,{__position:2,__code:"<Dante content={null} widgets={[ImageBlockConfig()]} />",__scope:{props:t,h1:l.e,Dante:s.a,State:c.a,Toggle:c.b,ImageBlockConfig:d.a,EmbedBlockConfig:p.a,VideoBlockConfig:u.a,PlaceholderBlockConfig:m.a,VideoRecorderBlockConfig:ne,config:te}},a.a.createElement(s.a,{content:null,widgets:[Object(d.a)()]})),a.a.createElement(r.MDXTag,{name:"h1",components:n,props:{id:"embed--extract"}},a.a.createElement(r.MDXTag,{name:"a",components:n,parentName:"h1",props:{"aria-hidden":!0,href:"#embed--extract"}},a.a.createElement(r.MDXTag,{name:"span",components:n,parentName:"a",props:{className:"icon-link"}},"#")),"Embed & Extract"),a.a.createElement(r.MDXTag,{name:"p",components:n},"Embed and Video widgets uses open framely you can override this by using your own account of iframely or use another oembed provider like embedly."),a.a.createElement(r.MDXTag,{name:"h2",components:n,props:{id:"embed-link"}},a.a.createElement(r.MDXTag,{name:"a",components:n,parentName:"h2",props:{"aria-hidden":!0,href:"#embed-link"}},a.a.createElement(r.MDXTag,{name:"span",components:n,parentName:"a",props:{className:"icon-link"}},"#")),"Embed Link"),a.a.createElement(i.d,{__position:3,__code:"<Dante\n  content={null}\n  widgets={[\n    EmbedBlockConfig({\n      options: {\n        placeholder: 'put an external link',\n        endpoint: '//noembed.com/embed?url=',\n      },\n    }),\n    PlaceholderBlockConfig(),\n  ]}\n/>",__scope:{props:t,h1:l.e,Dante:s.a,State:c.a,Toggle:c.b,ImageBlockConfig:d.a,EmbedBlockConfig:p.a,VideoBlockConfig:u.a,PlaceholderBlockConfig:m.a,VideoRecorderBlockConfig:ne,config:te}},a.a.createElement(s.a,{content:null,widgets:[Object(p.a)({options:{placeholder:"put an external link",endpoint:"//noembed.com/embed?url="}}),Object(m.a)()]})),a.a.createElement(r.MDXTag,{name:"h2",components:n,props:{id:"embed-video"}},a.a.createElement(r.MDXTag,{name:"a",components:n,parentName:"h2",props:{"aria-hidden":!0,href:"#embed-video"}},a.a.createElement(r.MDXTag,{name:"span",components:n,parentName:"a",props:{className:"icon-link"}},"#")),"Embed Video"),a.a.createElement(i.d,{__position:4,__code:"<Dante\n  content={null}\n  widgets={[\n    VideoBlockConfig({\n      options: {\n        placeholder: 'put an external video link',\n        endpoint: '//noembed.com/embed?url=',\n        caption: 'optional caption',\n      },\n    }),\n    PlaceholderBlockConfig(),\n  ]}\n/>",__scope:{props:t,h1:l.e,Dante:s.a,State:c.a,Toggle:c.b,ImageBlockConfig:d.a,EmbedBlockConfig:p.a,VideoBlockConfig:u.a,PlaceholderBlockConfig:m.a,VideoRecorderBlockConfig:ne,config:te}},a.a.createElement(s.a,{content:null,widgets:[Object(u.a)({options:{placeholder:"put an external video link",endpoint:"//noembed.com/embed?url=",caption:"optional caption"}}),Object(m.a)()]})),a.a.createElement(r.MDXTag,{name:"h2",components:n,props:{id:"upload"}},a.a.createElement(r.MDXTag,{name:"a",components:n,parentName:"h2",props:{"aria-hidden":!0,href:"#upload"}},a.a.createElement(r.MDXTag,{name:"span",components:n,parentName:"a",props:{className:"icon-link"}},"#")),"Upload"),a.a.createElement(i.d,{__position:5,__code:"<Dante content={null} widgets={[ImageBlockConfig()]} />",__scope:{props:t,h1:l.e,Dante:s.a,State:c.a,Toggle:c.b,ImageBlockConfig:d.a,EmbedBlockConfig:p.a,VideoBlockConfig:u.a,PlaceholderBlockConfig:m.a,VideoRecorderBlockConfig:ne,config:te}},a.a.createElement(s.a,{content:null,widgets:[Object(d.a)()]})),a.a.createElement(r.MDXTag,{name:"h2",components:n,props:{id:"upload-url-callback"}},a.a.createElement(r.MDXTag,{name:"a",components:n,parentName:"h2",props:{"aria-hidden":!0,href:"#upload-url-callback"}},a.a.createElement(r.MDXTag,{name:"span",components:n,parentName:"a",props:{className:"icon-link"}},"#")),"Upload Url Callback"),a.a.createElement(i.d,{__position:6,__code:"<Dante\n  content={null}\n  widgets={[\n    ImageBlockConfig({\n      options: {\n        upload_url: config.uploadUrl,\n        upload_callback: (ctx, img) => {\n          alert('file uploaded: ' + ctx.data.url)\n        },\n        upload_error_callback: (ctx, img) => {\n          console.log(ctx)\n        },\n      },\n    }),\n  ]}\n/>",__scope:{props:t,h1:l.e,Dante:s.a,State:c.a,Toggle:c.b,ImageBlockConfig:d.a,EmbedBlockConfig:p.a,VideoBlockConfig:u.a,PlaceholderBlockConfig:m.a,VideoRecorderBlockConfig:ne,config:te}},a.a.createElement(s.a,{content:null,widgets:[Object(d.a)({options:{upload_url:te.uploadUrl,upload_callback:function(e,n){alert("file uploaded: "+e.data.url)},upload_error_callback:function(e,n){console.log(e)}}})]})),a.a.createElement(r.MDXTag,{name:"h2",components:n,props:{id:"video"}},a.a.createElement(r.MDXTag,{name:"a",components:n,parentName:"h2",props:{"aria-hidden":!0,href:"#video"}},a.a.createElement(r.MDXTag,{name:"span",components:n,parentName:"a",props:{className:"icon-link"}},"#")),"Video"),a.a.createElement(i.d,{__position:7,__code:"<Dante\n  content={null}\n  widgets={[\n    VideoRecorderBlockConfig({\n      options: {\n        seconds_to_record: 5000,\n        upload_url: config.uploadUrl,\n        upload_callback: (ctx, img) => {\n          console.log('file uploaded: ' + ctx.data.url)\n        },\n        upload_error_callback: (ctx, img) => {\n          debugger\n          console.log(ctx)\n        },\n      },\n    }),\n  ]}\n  debug={true}\n/>",__scope:{props:t,h1:l.e,Dante:s.a,State:c.a,Toggle:c.b,ImageBlockConfig:d.a,EmbedBlockConfig:p.a,VideoBlockConfig:u.a,PlaceholderBlockConfig:m.a,VideoRecorderBlockConfig:ne,config:te}},a.a.createElement(s.a,{content:null,widgets:[ne({options:{seconds_to_record:5e3,upload_url:te.uploadUrl,upload_callback:function(e,n){console.log("file uploaded: "+e.data.url)},upload_error_callback:function(e,n){console.log(e)}}})],debug:!0})))}}}]);